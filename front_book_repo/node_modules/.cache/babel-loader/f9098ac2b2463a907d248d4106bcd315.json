{"ast":null,"code":"import _objectSpread from \"/home/balaclava/Desktop/Javascript/react/100daysCode/01-Book_system/front_book_repo/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/home/balaclava/Desktop/Javascript/react/100daysCode/01-Book_system/front_book_repo/src/components/common/form.jsx\";\nimport React from \"react\";\nimport Joi from \"joi-browser\";\nimport Input from \"./input\";\nimport Select from \"./select\";\n\nconst Form = () => {\n  function validate() {\n    const options = {\n      abortEarly: false\n    };\n\n    const _Joi$validate = Joi.validate(user, schema, options),\n          error = _Joi$validate.error;\n\n    if (!error) return null;\n    const errors = {};\n\n    for (let item of error.details) errors[item.path[0]] = item.message;\n\n    return errors;\n  }\n\n  function validateProperty({\n    name,\n    value\n  }) {\n    const obj = {\n      [name]: value\n    };\n    const propertySchema = {\n      [name]: schema[name]\n    };\n\n    const _Joi$validate2 = Joi.validate(obj, propertySchema),\n          error = _Joi$validate2.error;\n\n    return error ? error.details[0].message : null;\n  }\n\n  function handleChange({\n    currentTarget: input\n  }) {\n    const allErrors = errors;\n    const errorMessage = validateProperty(input);\n    if (errorMessage) allErrors[input.name] = errorMessage;else delete allErrors[input.name];\n    setErrors(allErrors);\n    setUser(_objectSpread({}, user, {\n      [input.name]: input.value\n    }));\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    const errors = validate();\n    setErrors(errors || {});\n    if (errors) return;\n  }\n\n  function renderButton(label) {\n    return React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-primary\",\n      disabled: validate(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }, label);\n  }\n\n  function renderSelect(name, label) {\n    return React.createElement(Select, {\n      name: name,\n      label: label,\n      options: genres,\n      item: book,\n      setItem: setBook,\n      handleChange: handleChange,\n      error: errors[name],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    });\n  }\n\n  function renderInput(name, label, type = \"text\") {\n    return React.createElement(Input, {\n      name: name,\n      label: label,\n      type: type,\n      item: user,\n      setItem: setUser,\n      handleChange: handleChange,\n      error: errors[name],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    });\n  }\n};\n\nexport default Form;","map":{"version":3,"sources":["/home/balaclava/Desktop/Javascript/react/100daysCode/01-Book_system/front_book_repo/src/components/common/form.jsx"],"names":["React","Joi","Input","Select","Form","validate","options","abortEarly","user","schema","error","errors","item","details","path","message","validateProperty","name","value","obj","propertySchema","handleChange","currentTarget","input","allErrors","errorMessage","setErrors","setUser","handleSubmit","e","preventDefault","renderButton","label","renderSelect","genres","book","setBook","renderInput","type"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,aAAhB;AAEA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,MAAP,MAAmB,UAAnB;;AAEA,MAAMC,IAAI,GAAG,MAAM;AACjB,WAASC,QAAT,GAAoB;AAClB,UAAMC,OAAO,GAAG;AAAEC,MAAAA,UAAU,EAAE;AAAd,KAAhB;;AADkB,0BAEAN,GAAG,CAACI,QAAJ,CAAaG,IAAb,EAAmBC,MAAnB,EAA2BH,OAA3B,CAFA;AAAA,UAEVI,KAFU,iBAEVA,KAFU;;AAGlB,QAAI,CAACA,KAAL,EAAY,OAAO,IAAP;AAEZ,UAAMC,MAAM,GAAG,EAAf;;AACA,SAAK,IAAIC,IAAT,IAAiBF,KAAK,CAACG,OAAvB,EAAgCF,MAAM,CAACC,IAAI,CAACE,IAAL,CAAU,CAAV,CAAD,CAAN,GAAuBF,IAAI,CAACG,OAA5B;;AAChC,WAAOJ,MAAP;AACD;;AAED,WAASK,gBAAT,CAA0B;AAAEC,IAAAA,IAAF;AAAQC,IAAAA;AAAR,GAA1B,EAA2C;AACzC,UAAMC,GAAG,GAAG;AAAE,OAACF,IAAD,GAAQC;AAAV,KAAZ;AACA,UAAME,cAAc,GAAG;AAAE,OAACH,IAAD,GAAQR,MAAM,CAACQ,IAAD;AAAhB,KAAvB;;AAFyC,2BAGvBhB,GAAG,CAACI,QAAJ,CAAac,GAAb,EAAkBC,cAAlB,CAHuB;AAAA,UAGjCV,KAHiC,kBAGjCA,KAHiC;;AAKzC,WAAOA,KAAK,GAAGA,KAAK,CAACG,OAAN,CAAc,CAAd,EAAiBE,OAApB,GAA8B,IAA1C;AACD;;AAED,WAASM,YAAT,CAAsB;AAAEC,IAAAA,aAAa,EAAEC;AAAjB,GAAtB,EAAgD;AAC9C,UAAMC,SAAS,GAAGb,MAAlB;AACA,UAAMc,YAAY,GAAGT,gBAAgB,CAACO,KAAD,CAArC;AACA,QAAIE,YAAJ,EAAkBD,SAAS,CAACD,KAAK,CAACN,IAAP,CAAT,GAAwBQ,YAAxB,CAAlB,KACK,OAAOD,SAAS,CAACD,KAAK,CAACN,IAAP,CAAhB;AAELS,IAAAA,SAAS,CAACF,SAAD,CAAT;AACAG,IAAAA,OAAO,mBAAMnB,IAAN;AAAY,OAACe,KAAK,CAACN,IAAP,GAAcM,KAAK,CAACL;AAAhC,OAAP;AACD;;AAED,WAASU,YAAT,CAAsBC,CAAtB,EAAyB;AACvBA,IAAAA,CAAC,CAACC,cAAF;AAEA,UAAMnB,MAAM,GAAGN,QAAQ,EAAvB;AACAqB,IAAAA,SAAS,CAACf,MAAM,IAAI,EAAX,CAAT;AACA,QAAIA,MAAJ,EAAY;AACb;;AAED,WAASoB,YAAT,CAAsBC,KAAtB,EAA6B;AAC3B,WACE;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,SAAS,EAAC,iBAAhC;AAAkD,MAAA,QAAQ,EAAE3B,QAAQ,EAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG2B,KADH,CADF;AAKD;;AAED,WAASC,YAAT,CAAsBhB,IAAtB,EAA4Be,KAA5B,EAAmC;AACjC,WACE,oBAAC,MAAD;AACE,MAAA,IAAI,EAAEf,IADR;AAEE,MAAA,KAAK,EAAEe,KAFT;AAGE,MAAA,OAAO,EAAEE,MAHX;AAIE,MAAA,IAAI,EAAEC,IAJR;AAKE,MAAA,OAAO,EAAEC,OALX;AAME,MAAA,YAAY,EAAEf,YANhB;AAOE,MAAA,KAAK,EAAEV,MAAM,CAACM,IAAD,CAPf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF;AAWD;;AAED,WAASoB,WAAT,CAAqBpB,IAArB,EAA2Be,KAA3B,EAAkCM,IAAI,GAAG,MAAzC,EAAiD;AAC/C,WACE,oBAAC,KAAD;AACE,MAAA,IAAI,EAAErB,IADR;AAEE,MAAA,KAAK,EAAEe,KAFT;AAGE,MAAA,IAAI,EAAEM,IAHR;AAIE,MAAA,IAAI,EAAE9B,IAJR;AAKE,MAAA,OAAO,EAAEmB,OALX;AAME,MAAA,YAAY,EAAEN,YANhB;AAOE,MAAA,KAAK,EAAEV,MAAM,CAACM,IAAD,CAPf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF;AAWD;AACF,CAxED;;AA0EA,eAAeb,IAAf","sourcesContent":["import React from \"react\";\nimport Joi from \"joi-browser\";\n\nimport Input from \"./input\";\nimport Select from \"./select\";\n\nconst Form = () => {\n  function validate() {\n    const options = { abortEarly: false };\n    const { error } = Joi.validate(user, schema, options);\n    if (!error) return null;\n\n    const errors = {};\n    for (let item of error.details) errors[item.path[0]] = item.message;\n    return errors;\n  }\n\n  function validateProperty({ name, value }) {\n    const obj = { [name]: value };\n    const propertySchema = { [name]: schema[name] };\n    const { error } = Joi.validate(obj, propertySchema);\n\n    return error ? error.details[0].message : null;\n  }\n\n  function handleChange({ currentTarget: input }) {\n    const allErrors = errors;\n    const errorMessage = validateProperty(input);\n    if (errorMessage) allErrors[input.name] = errorMessage;\n    else delete allErrors[input.name];\n\n    setErrors(allErrors);\n    setUser({ ...user, [input.name]: input.value });\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    const errors = validate();\n    setErrors(errors || {});\n    if (errors) return;\n  }\n\n  function renderButton(label) {\n    return (\n      <button type=\"submit\" className=\"btn btn-primary\" disabled={validate()}>\n        {label}\n      </button>\n    );\n  }\n\n  function renderSelect(name, label) {\n    return (\n      <Select\n        name={name}\n        label={label}\n        options={genres}\n        item={book}\n        setItem={setBook}\n        handleChange={handleChange}\n        error={errors[name]}\n      />\n    );\n  }\n\n  function renderInput(name, label, type = \"text\") {\n    return (\n      <Input\n        name={name}\n        label={label}\n        type={type}\n        item={user}\n        setItem={setUser}\n        handleChange={handleChange}\n        error={errors[name]}\n      />\n    );\n  }\n};\n\nexport default Form;\n"]},"metadata":{},"sourceType":"module"}